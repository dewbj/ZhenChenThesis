//*Create 1000 simulated patient nodes, each has a randomly assigned rare disease, up to 9 related HPOs, and 1 unrelated HPO
call apoc.periodic.iterate('call apoc.create.uuids(1000) yield uuid with uuid match (d:Disease) return collect(d.DisorderName) as Diseases, uuid','create (p:Patient:Test_N1 {uuid:uuid}) set p.DisorderName = apoc.coll.randomItem(Diseases) with p match (d:Disease)-[:Phenotype]->(h:HPO) where d.DisorderName = p.DisorderName with collect(h.HPO_Term_Name) as HPOs, p match (d:Disease)-[:Phenotype]->(h:HPO) where not h.HPO_Term_Name in HPOs with collect(h.HPO_Term_Name) as nHPOs, p, HPOs set p.HPO_Term_Name = apoc.coll.randomItems(nHPOs,1) + apoc.coll.randomItems(HPOs,apoc.coll.randomItem(range(0,9)))', {batchSize:1,parallel:false})